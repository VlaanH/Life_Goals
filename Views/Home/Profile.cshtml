@model GoalObjects
@using Microsoft.AspNetCore.Http
@using System.Security.Claims
@{

    string userId = default;
    
    if (User.Identity.IsAuthenticated==true)
        userId=User.FindFirstValue(ClaimTypes.NameIdentifier);  
    

   

    string id  = ViewData["id"].ToString();

}
@section scripts{
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-ajax-unobtrusive/3.2.6/jquery.unobtrusive-ajax.min.js"></script>
    
    
}
@if (id!="non"&id!="zero")
{


    
<partial name="Profile/DonatDialog" model="id"/> 
    
<div id="panel" class="text-center">
  
    <div class="profileWrapper">
        
        
        @await Html.PartialAsync("Profile/UserAllData",id)
        
        @await Html.PartialAsync("Profile/GoalLine",id)
        

        @if (id == userId)
        {
            //ovner
            
            <div class="div_create_goal">

                <form id="my_form" method="get" data-ajax="true" data-ajax-method="get" data-ajax-update="#panel" data-ajax-mode='replace' data-ajax-url="@Url.Action("GoalAdd", "Home")">

                    <div style="display: flex;">
                        
                        <input class="input-radius form-control blue" name="titles" placeholder="Title" autocomplete="off" style="display: initial;width: 78%;margin-bottom: 24px;"/>
                        <input type="checkbox" name="isDonate" class="checkbox" value="true"/><span class="checkboxText">Is Donate</span>

                        <input class="input-radius form-control blue" name="donateValue" placeholder="Value" type="text" oninput="this.value = this.value.replace(/[^0-9.]/g, ''); 
                            this.value = this.value.replace(/(\..*)\./g, '$1');"
                               value="0.001" maxlength="10" style="display: initial;width: 16%;margin-bottom: 24px;" autocomplete="off">
                    </div>
                   
                    

                   <textarea placeholder="Body description..."  name="body" rows="3" class="textarea_description"></textarea>

                    <br/>
                    <input type="submit" class="btn btn-white"/>  
                </form>
            </div>

        }


        <div class="goals">
             @await Html.PartialAsync("Profile/GetAllGoals",id)
        </div>





        

    </div>
</div>
    
}
else
{
    if (id=="zero")
    {
        <script>
            //redirect
            window.location.href  = "/Identity/Account/Login";
        </script>

    }
    if (id=="non")
    {
        <partial name="Error404"/>
    }
    
  
    
   
   
   
}
